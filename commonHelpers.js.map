{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryItemMarkup = images => {\n    return images\n      .map(\n        ({ webformatURL, largeImageURL, tags, likes }) => `\n          <div class=\"col gallery-item\">\n            <div class=\"card shadow-sm\">\n              <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img img-fluid\" />\n              </a>\n              <div class=\"card-body\">\n                <div class=\"d-flex justify-content-between align-items-center\">\n                  <div class=\"btn-group\">\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">View</button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Edit</button>\n                  </div>\n                  <small class=\"text-body-secondary\">Likes: ${likes}</small>\n                </div>\n              </div>\n            </div>\n          </div>`\n      )\n      .join('');\n  };\n  ","import axios from 'axios';\n\nconst API_KEY = '43813609-98f1a5b8a61f7cd1a2ca10379'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = async (query = 'cat', page = 1, per_page = 15) => {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        orientation: 'horizontal',\n        page: page,\n        per_page: per_page,\n    });\n\n    try {\n        const response = await axios.get(`${BASE_URL}?${searchParams.toString()}`);\n        return response.data;\n    } catch (error) {\n        throw new Error(`Error ${error.response.status}: ${error.response.statusText}`);\n    }\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createGalleryItemMarkup } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nconst loaderEl = document.querySelector('.js-loader');\n\nlet lightbox;\nlet searchQuery = '';\nlet page = 1;\n\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n    searchQuery = event.target.elements.searchKeyword.value.trim();\n\n    if (searchQuery === '') {\n        galleryEl.innerHTML = '';\n        event.target.reset();\n        iziToast.show({\n            message: 'Input field cannot be empty',\n            position: 'topRight',\n            timeout: 2000,\n            color: 'red',\n        });\n        return;\n    }\n\n    page = 1;\n    galleryEl.innerHTML = '';\n    loadMoreBtnEl.classList.add('is-hidden');\n    loaderEl.classList.remove('is-hidden');\n\n    try {\n        const imagesData = await fetchPhotosByQuery(searchQuery, page);\n        displayImages(imagesData);\n    } catch (error) {\n        console.error('Error fetching photos:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching photos',\n            position: 'topRight',\n            timeout: 2000,\n            color: 'red',\n        });\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n};\n\nconst loadMoreImages = async () => {\n    loaderEl.classList.remove('is-hidden');\n    try {\n        const imagesData = await fetchPhotosByQuery(searchQuery, page + 1);\n        displayImages(imagesData, true);\n        if (page + 1 >= 15) {\n            loadMoreBtnEl.classList.add('is-hidden');\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                timeout: 2000,\n                color: 'blue',\n            });\n        } else {\n            page += 1;\n        }\n    } catch (error) {\n        console.error('Error fetching photos:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching photos',\n            position: 'topRight',\n            timeout: 2000,\n            color: 'red',\n        });\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n};\n\nconst displayImages = (imagesData, append = false) => {\n    if (!imagesData.hits || imagesData.hits.length === 0) {\n        iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            timeout: 2000,\n            color: 'red',\n        });\n        galleryEl.innerHTML = '';\n        return;\n    }\n\n    const markup = createGalleryItemMarkup(imagesData.hits);\n    if (append) {\n        galleryEl.insertAdjacentHTML('beforeend', markup);\n    } else {\n        galleryEl.innerHTML = markup;\n    }\n\n    if (lightbox) {\n        lightbox.destroy();\n    }\n    lightbox = new SimpleLightbox('.js-gallery a', {\n        captionDelay: 250,\n    });\n\n    if (imagesData.hits.length < 15 || page * 15 >= imagesData.totalHits) {\n        loadMoreBtnEl.classList.add('is-hidden');\n        if (page * 15 >= imagesData.totalHits) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n                timeout: 2000,\n                color: 'blue',\n            });\n        }\n    } else {\n        loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n        const itemHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click',  loadMoreImages);\n"],"names":["createGalleryItemMarkup","images","webformatURL","largeImageURL","tags","likes","API_KEY","BASE_URL","fetchPhotosByQuery","query","page","per_page","searchParams","axios","error","searchFormEl","galleryEl","loadMoreBtnEl","loaderEl","lightbox","searchQuery","onSearchFormSubmit","event","iziToast","imagesData","displayImages","loadMoreImages","append","markup","SimpleLightbox","galleryItems","itemHeight"],"mappings":"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"}